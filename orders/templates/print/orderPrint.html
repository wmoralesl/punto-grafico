<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido No. {{order.id}} - PubliPrint</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @page {
            size: Letter;
            margin: 1cm;
        }
        body {
            font-family: 'Arial', sans-serif;
            color: #333;
            line-height: 1;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
        }
        .logo {
            max-height: 80px;
            width: auto;
        }
        .company-info {
            text-align: right;
        }
        .company-name {
            color: #333;
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        .order-title {
            color: #333;
            text-align: center;
            margin: 25px 0;
            font-size: 1.8rem;
        }
        .client-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .section-title {
            font-weight: 600;
            color: #333;
            margin: 15px 0 10px;
        }
        .table {
            margin-bottom: 30px;
        }
        .table thead th {
            background-color: #333;
            color: white;
            font-weight: 600;
        }
        .totals {
            background-color: #f8f9fa;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        .totals-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        .total-label {
            font-weight: 600;
            
        }
        .total-value {
            font-weight: 700;
        }
        .import{
            background-color: #333;
            color: #ffffff;
            padding: 5px;
            border-radius: 4px;
        }
        .dates-section {
            display: flex;
            justify-content: space-between;
            margin: 25px 0;
        }
        .date-box {
            flex: 1;
            margin: 0 10px;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 0.9rem;
            color: #666;
            text-align: center;
        }
        .badge{
            font-size: 0.9rem;
            padding: 5px 10px;
            border-radius: 4px;
            background-color: #888888;
        }
        @media print {
            body {
                padding: 0;
                margin: 0;
            }
            .no-print {
                display: none !important;
            }
            .header, .client-info, .table, .totals {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Encabezado con logo e información de la empresa -->
        <div class="header">
            <div>
                <img class="logo" src="{{ logo_url }}" alt="Logo PubliPrint">
            </div> 
            <div class="company-info">
                <div class="company-name">{{organization.name}}</div>
                <div>{{organization.direction}}</div>
                <div>{{organization.phone}}</div>
                <div>{{organization.email}}</div>
            </div>
        </div>

        <!-- Título del pedido -->
        <h1 class="order-title">ORDEN # {{order.id}}

            <span class="badge">{{ order.current_status.get_code_display }}</span>
        </h1>

       logo  {{ logo_url }}
        
            

        <!-- Información del cliente -->
        <!-- <div class="client-info">
            <h3 class="section-title text-center">INFORMACIÓN DEL CLIENTE</h3>
            <div class="row">
                <div class="col-6 text-center">
                    <p><strong>Nombre:</strong> {{order.client.name}}</p>
                </div>
                <div class="col-6 text-center">
                    <p><strong>Teléfono:</strong> {{order.client.phone}}</p>
                </div>
            </div>
        </div> -->
        <table class="table table-bordered">
            <thead class="table-primary">
                <tr>
                    <th class="text-center">INFORMACIÓN DEL CLIENTE</th>
                </tr>
            </thead>
            <tbody >
                <tr >
                    <td>
                        <div class="row my-0">
                            <div class="col-6 text-center">
                                <strong>Nombre:</strong> {{order.client.name}}
                            </div>
                            <div class="col-6 text-center">
                                <strong>Teléfono:</strong> {{order.client.phone}}
                                
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
            </table>

        <!-- Detalles del pedido -->
        <h3 class="section-title text-center">DETALLES DEL PEDIDO</h3>
        <table class="table table-bordered">
            <thead class="table-primary">
                <tr>
                    <th class="text-center" style="width: 10%;">Cantidad</th>
                    <th class="text-start" style="width: 50%;">Descripción</th>
                    <th class="text-end" style="width: 20%;">Precio Unitario</th>
                    <th class="text-end" style="width: 20%;">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for line in order.lines.all %}
                <tr>
                    <td class="text-center">{{line.quantity}}</td>
                    <td>{{line.description}}</td>
                    <td class="text-end">Q {{line.unit_price}}</td>
                    <td class="text-end">Q {{line.subtotal}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Totales -->
        <div class="totals">
            <div class="row">
                <div class="col-md-6 offset-md-6">
                    <div class="totals-row">
                        <span class="total-label">Total del Pedido:</span>
                        <span class="total-value import">Q {{ order.get_total }}</span>
                    </div>
                    <div class="totals-row">
                        <span class="total-label">Anticipo:</span>
                        <span class="total-value">Q {{ order.anticipo }}</span>
                    </div>
                    <div class="totals-row">
                        <span class="total-label">Saldo Pendiente:</span>
                        <span class="total-value">Q {{ order.saldo }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fechas y responsable -->
        <div class="dates-section text-center">
            <div class="date-box">
                <h5 class="section-title">FECHA SOLICITUD</h5>
                <p>{{order.request_date}}</p>
            </div>
            <div class="date-box">
                <h5 class="section-title">FECHA DE ENTREGA</h5>
                <p>{{order.deadline}}</p>
            </div>
            <div class="date-box">
                <h5 class="section-title">ENCARGADO</h5>
                <p>{{order.responsible.name}}</p>
            </div>
        </div>

        <!-- Notas y servicios -->
        <div class="footer">
            <p>Mantas vinílicas, Calcomanías, Cuadros en PVC, Figuras Troqueladas, Tazas, Playeras, Pachones, Llaveros, Uniformes deportivos, Uniformes Empresariales, Banners, Tarjetas de presentación, Volantes, Trifoliares y mucho más.</p>
            <p class="mt-3">¡Gracias por su preferencia!</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>